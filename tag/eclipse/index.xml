<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Eclipse | Michael Forster</title><link>https://michael.forster.pro/tag/eclipse/</link><atom:link href="https://michael.forster.pro/tag/eclipse/index.xml" rel="self" type="application/rss+xml"/><description>Eclipse</description><generator>Wowchemy (https://wowchemy.com)</generator><language>en-us</language><lastBuildDate>Sat, 20 Dec 2008 00:00:00 +0000</lastBuildDate><image><url>https://michael.forster.pro/media/icon_hu5c8c70ccc479e94e8864e2f432562923_202732_512x512_fill_lanczos_center_3.png</url><title>Eclipse</title><link>https://michael.forster.pro/tag/eclipse/</link></image><item><title>View Android Source Code in Eclipse</title><link>https://michael.forster.pro/post/android-source-eclipse/</link><pubDate>Sat, 20 Dec 2008 00:00:00 +0000</pubDate><guid>https://michael.forster.pro/post/android-source-eclipse/</guid><description>&lt;div class="alert alert-warning">
&lt;div>
This blog post has been imported from my old Blogger
blog. It is more than 10 years old and likely horribly out of date. I have not
updated the content nor fixed any broken links.
&lt;/div>
&lt;/div>
&lt;p>Recently, I have been hacking around with &lt;a href="http://www.android.com/" target="_blank" rel="noopener">Android&lt;/a> a
lot, and I think it&amp;rsquo;s awesome.&lt;/p>
&lt;p>Unfortunately, the &lt;a href="http://code.google.com/android/" target="_blank" rel="noopener">Android SDK&lt;/a> does not come
with source code, and sometimes the
&lt;a href="http://code.google.com/android/documentation.html" target="_blank" rel="noopener">docs&lt;/a> are not so great, yet.
Being an open source project, the &lt;a href="http://source.android.com/" target="_blank" rel="noopener">Android sources&lt;/a>
are available online, but they are not very easy to access from Eclipse. For
one, the source files are sometimes difficult to find as they are distributed
over many individual Git &lt;a href="http://android.git.kernel.org/" target="_blank" rel="noopener">repositories&lt;/a>, and
then I am not always online.&lt;/p>
&lt;p>Integrating source files into Eclipse is usually quite easy, but the Android
Eclipse plugin
(&lt;a href="http://code.google.com/android/intro/installing.html#installingplugin" target="_blank" rel="noopener">ADT&lt;/a>)
does not allow to modify the Java Source Attachment of android.jar in the
Android Library. Fortunately, you only have to find out what the default
location for source code is. Eric Burke nicely describes &lt;a href="http://stuffthathappens.com/blog/2008/11/01/browsing-android-source-in-eclipse/" target="_blank" rel="noopener">how to find that
out.&lt;/a>&lt;/p>
&lt;p>Long story short: Android source code needs to be placed in a &lt;code>sources&lt;/code>
subdirectory of the Android SDK. Here is what you need to do:&lt;/p>
&lt;ol>
&lt;li>&lt;a href="http://source.android.com/download/" target="_blank" rel="noopener">Get the Android source code&lt;/a> (&lt;a href="http://source.android.com/download/using-repo#TOC-Task-reference" target="_blank" rel="noopener">install
repo&lt;/a>, repo
init, repo sync)&lt;/li>
&lt;li>Move all Java sources into a &lt;code>sources&lt;/code> subdirectory of the Android SDK&lt;/li>
&lt;/ol>
&lt;p>Step 2 sounds easier than it is. There are a lot of Java files in the Android
sources, and they are sprinkled all over the place. Eclipse, however, needs the
source files in a standard Java source directory structure: The path of a source
file needs to match its package name. To simplify this task, I have written a
short Python script that recursively searches for Java files and packs them into
a ZIP file. Unpack that source file into a &lt;code>sources&lt;/code> subdirectory of the Android
SDK. Enjoy:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">from&lt;/span> \&lt;span class="n">_&lt;/span>\&lt;span class="n">_future&lt;/span>\&lt;span class="n">_&lt;/span>\&lt;span class="n">_&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="nn">with&lt;/span>\&lt;span class="n">_statement&lt;/span> &lt;span class="c1"># for Python &amp;lt; 2.6&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">os&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">re&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">zipfile&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># open a zip file&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">DST&lt;/span>\&lt;span class="n">_FILE&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;sources.zip&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">exists&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">DST&lt;/span>\&lt;span class="n">_FILE&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span> &lt;span class="n">DST&lt;/span>\&lt;span class="n">_FILE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;already exists&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">exit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">zip&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">zipfile&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ZipFile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">DST&lt;/span>\&lt;span class="n">_FILE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;w&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">zipfile&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ZIP&lt;/span>\&lt;span class="n">_DEFLATED&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># some files are duplicated, copy them only once&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">written&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># iterate over all Java files&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span> &lt;span class="nb">dir&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">subdirs&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">files&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">walk&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;.&amp;#39;&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">file&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">files&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">file&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">endswith&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;.java&amp;#39;&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># search package name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">path&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">join&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">dir&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">file&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">with&lt;/span> &lt;span class="nb">open&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">f&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">line&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">f&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">match&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">re&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="k">match&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sa">r&lt;/span>&lt;span class="s1">&amp;#39;&lt;/span>&lt;span class="se">\\&lt;/span>&lt;span class="s1">s\*package&lt;/span>&lt;span class="se">\\&lt;/span>&lt;span class="s1">s+(\[a-zA-Z0-9&lt;/span>&lt;span class="se">\\&lt;/span>&lt;span class="s1">.\_\]+);&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">line&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="k">match&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># copy source into the zip file using the package as path&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">zippath&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">match&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">group&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">replace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;.&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;/&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s1">&amp;#39;/&amp;#39;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">file&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">zippath&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">written&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">written&lt;/span>\&lt;span class="p">[&lt;/span>&lt;span class="n">zippath&lt;/span>\&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">zip&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">write&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">zippath&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">break&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">zip&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">close&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item></channel></rss>