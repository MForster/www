<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Wowchemy 5.7.0 for Hugo"><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preload as=style href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap"><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap" media=print onload='this.media="all"'><link rel=stylesheet href=/css/vendor-bundle.min.16f785cdb553c8c4431db6775122af35.css media=print onload='this.media="all"'><link rel=stylesheet href=/css/wowchemy.a8df70abe3f6951c1bac9072e5d401a1.css><link rel=stylesheet href=/css/libs/chroma/dracula.min.css title=hl-light media=print onload='this.media="all"'><link rel=stylesheet href=/css/libs/chroma/dracula.min.css title=hl-dark media=print onload='this.media="all"' disabled><meta name=author content="Dr. Michael Forster"><meta name=description content="This blog post has been imported from my old Blogger blog. It is more than 10 years old and likely horribly out of date. I have not updated the content nor fixed any broken links. Recently, I have been hacking around with Android a lot, and I think it&rsquo;s awesome.
Unfortunately, the Android SDK does not come with source code, and sometimes the docs are not so great, yet. Being an open source project, the Android sources are available online, but they are not very easy to access from Eclipse."><link rel=alternate hreflang=en-us href=https://michael.forster.pro/post/android-source-eclipse/><link rel=canonical href=https://michael.forster.pro/post/android-source-eclipse/><link rel=icon type=image/png href=/media/icon_hu5c8c70ccc479e94e8864e2f432562923_202732_32x32_fill_lanczos_center_3.png><link rel=apple-touch-icon type=image/png href=/media/icon_hu5c8c70ccc479e94e8864e2f432562923_202732_180x180_fill_lanczos_center_3.png><meta name=theme-color content="#1565c0"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="https://michael.forster.pro/media/icon_hu5c8c70ccc479e94e8864e2f432562923_202732_512x512_fill_lanczos_center_3.png"><meta property="og:site_name" content="Michael Forster"><meta property="og:url" content="https://michael.forster.pro/post/android-source-eclipse/"><meta property="og:title" content="View Android Source Code in Eclipse | Michael Forster"><meta property="og:description" content="This blog post has been imported from my old Blogger blog. It is more than 10 years old and likely horribly out of date. I have not updated the content nor fixed any broken links. Recently, I have been hacking around with Android a lot, and I think it&rsquo;s awesome.
Unfortunately, the Android SDK does not come with source code, and sometimes the docs are not so great, yet. Being an open source project, the Android sources are available online, but they are not very easy to access from Eclipse."><meta property="og:image" content="https://michael.forster.pro/media/icon_hu5c8c70ccc479e94e8864e2f432562923_202732_512x512_fill_lanczos_center_3.png"><meta property="og:locale" content="en-us"><meta property="article:published_time" content="2008-12-20T00:00:00+00:00"><meta property="article:modified_time" content="2008-12-20T00:00:00+00:00"><title>View Android Source Code in Eclipse | Michael Forster</title></head><body id=top data-spy=scroll data-offset=70 data-target=#TableOfContents class=page-wrapper data-wc-page-id=8c3c118b139a9c3c22dbe0e6ac2fec82><script src=/js/wowchemy-init.min.ec9d49ca50e4b80bdb08f0417a28ed84.js></script><div class="page-header header--fixed"><header><nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id=navbar-main><div class=container-xl><div class="d-none d-lg-inline-flex"><a class=navbar-brand href=/>Michael Forster</a></div><button type=button class=navbar-toggler data-toggle=collapse data-target=#navbar-content aria-controls=navbar-content aria-expanded=false aria-label="Toggle navigation">
<span><i class="fas fa-bars"></i></span></button><div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none"><a class=navbar-brand href=/>Michael Forster</a></div><div class="navbar-collapse main-menu-item collapse justify-content-start" id=navbar-content><ul class="navbar-nav d-md-inline-flex"><li class=nav-item><a class=nav-link href=/#about><span>Home</span></a></li><li class=nav-item><a class=nav-link href=/#experience><span>Experience</span></a></li><li class=nav-item><a class=nav-link href=/#education><span>Education</span></a></li><li class=nav-item><a class=nav-link href=/posts><span>Posts</span></a></li><li class=nav-item><a class=nav-link href=/publications><span>Publications</span></a></li></ul></div><ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2"><li class="nav-item d-none d-lg-inline-flex"><a class=nav-link href=https://forster.pro/@michael data-toggle=tooltip data-placement=bottom title="Follow me on Mastodon" target=_blank rel=noopener aria-label="Follow me on Mastodon"><i class="fab fa-mastodon" aria-hidden=true></i></a></li><li class="nav-item dropdown theme-dropdown"><a href=# class=nav-link data-toggle=dropdown aria-haspopup=true aria-label="Display preferences"><i class="fas fa-moon" aria-hidden=true></i></a><div class=dropdown-menu><a href=# class="dropdown-item js-set-theme-light"><span>Light</span></a>
<a href=# class="dropdown-item js-set-theme-dark"><span>Dark</span></a>
<a href=# class="dropdown-item js-set-theme-auto"><span>Automatic</span></a></div></li></ul></div></nav></header></div><div class=page-body><article class=article><div class="article-container pt-3"><h1>View Android Source Code in Eclipse</h1><div class=article-metadata><div><span>Dr. Michael Forster</span></div><span class=article-date>2008-12-20</span>
<span class=middot-divider></span>
<span class=article-categories><i class="fas fa-folder mr-1"></i><a href=/category/blog/>Blog</a></span></div></div><div class=article-container><div class=article-style><div class="alert alert-warning"><div>This blog post has been imported from my old Blogger
blog. It is more than 10 years old and likely horribly out of date. I have not
updated the content nor fixed any broken links.</div></div><p>Recently, I have been hacking around with <a href=http://www.android.com/ target=_blank rel=noopener>Android</a> a
lot, and I think it&rsquo;s awesome.</p><p>Unfortunately, the <a href=http://code.google.com/android/ target=_blank rel=noopener>Android SDK</a> does not come
with source code, and sometimes the
<a href=http://code.google.com/android/documentation.html target=_blank rel=noopener>docs</a> are not so great, yet.
Being an open source project, the <a href=http://source.android.com/ target=_blank rel=noopener>Android sources</a>
are available online, but they are not very easy to access from Eclipse. For
one, the source files are sometimes difficult to find as they are distributed
over many individual Git <a href=http://android.git.kernel.org/ target=_blank rel=noopener>repositories</a>, and
then I am not always online.</p><p>Integrating source files into Eclipse is usually quite easy, but the Android
Eclipse plugin
(<a href=http://code.google.com/android/intro/installing.html#installingplugin target=_blank rel=noopener>ADT</a>)
does not allow to modify the Java Source Attachment of android.jar in the
Android Library. Fortunately, you only have to find out what the default
location for source code is. Eric Burke nicely describes <a href=http://stuffthathappens.com/blog/2008/11/01/browsing-android-source-in-eclipse/ target=_blank rel=noopener>how to find that
out.</a></p><p>Long story short: Android source code needs to be placed in a <code>sources</code>
subdirectory of the Android SDK. Here is what you need to do:</p><ol><li><a href=http://source.android.com/download/ target=_blank rel=noopener>Get the Android source code</a> (<a href=http://source.android.com/download/using-repo#TOC-Task-reference target=_blank rel=noopener>install
repo</a>, repo
init, repo sync)</li><li>Move all Java sources into a <code>sources</code> subdirectory of the Android SDK</li></ol><p>Step 2 sounds easier than it is. There are a lot of Java files in the Android
sources, and they are sprinkled all over the place. Eclipse, however, needs the
source files in a standard Java source directory structure: The path of a source
file needs to match its package name. To simplify this task, I have written a
short Python script that recursively searches for Java files and packs them into
a ZIP file. Unpack that source file into a <code>sources</code> subdirectory of the Android
SDK. Enjoy:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> \<span class=n>_</span>\<span class=n>_future</span>\<span class=n>_</span>\<span class=n>_</span> <span class=kn>import</span> <span class=nn>with</span>\<span class=n>_statement</span>  <span class=c1># for Python &lt; 2.6</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>os</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>re</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>zipfile</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># open a zip file</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>DST</span>\<span class=n>_FILE</span> <span class=o>=</span> <span class=s1>&#39;sources.zip&#39;</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>exists</span><span class=p>(</span><span class=n>DST</span>\<span class=n>_FILE</span><span class=p>):</span>
</span></span><span class=line><span class=cl>  <span class=nb>print</span> <span class=n>DST</span>\<span class=n>_FILE</span><span class=p>,</span> <span class=s2>&#34;already exists&#34;</span>
</span></span><span class=line><span class=cl>  <span class=n>exit</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>zip</span> <span class=o>=</span> <span class=n>zipfile</span><span class=o>.</span><span class=n>ZipFile</span><span class=p>(</span><span class=n>DST</span>\<span class=n>_FILE</span><span class=p>,</span> <span class=s1>&#39;w&#39;</span><span class=p>,</span> <span class=n>zipfile</span><span class=o>.</span><span class=n>ZIP</span>\<span class=n>_DEFLATED</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># some files are duplicated, copy them only once</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>written</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># iterate over all Java files</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=nb>dir</span><span class=p>,</span> <span class=n>subdirs</span><span class=p>,</span> <span class=n>files</span> <span class=ow>in</span> <span class=n>os</span><span class=o>.</span><span class=n>walk</span><span class=p>(</span><span class=s1>&#39;.&#39;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>  <span class=k>for</span> <span class=n>file</span> <span class=ow>in</span> <span class=n>files</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>file</span><span class=o>.</span><span class=n>endswith</span><span class=p>(</span><span class=s1>&#39;.java&#39;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>      <span class=c1># search package name</span>
</span></span><span class=line><span class=cl>      <span class=n>path</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=nb>dir</span><span class=p>,</span> <span class=n>file</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=n>path</span><span class=p>)</span> <span class=k>as</span> <span class=n>f</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>line</span> <span class=ow>in</span> <span class=n>f</span><span class=p>:</span>
</span></span><span class=line><span class=cl>          <span class=n>match</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=n>match</span><span class=p>(</span><span class=sa>r</span><span class=s1>&#39;</span><span class=se>\\</span><span class=s1>s\*package</span><span class=se>\\</span><span class=s1>s+(\[a-zA-Z0-9</span><span class=se>\\</span><span class=s1>.\_\]+);&#39;</span><span class=p>,</span> <span class=n>line</span><span class=p>)</span>
</span></span><span class=line><span class=cl>          <span class=k>if</span> <span class=n>match</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=c1># copy source into the zip file using the package as path</span>
</span></span><span class=line><span class=cl>            <span class=n>zippath</span> <span class=o>=</span> <span class=n>match</span><span class=o>.</span><span class=n>group</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span><span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=s1>&#39;.&#39;</span><span class=p>,</span> <span class=s1>&#39;/&#39;</span><span class=p>)</span> <span class=o>+</span> <span class=s1>&#39;/&#39;</span> <span class=o>+</span> <span class=n>file</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>zippath</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>written</span><span class=p>:</span>
</span></span><span class=line><span class=cl>              <span class=n>written</span>\<span class=p>[</span><span class=n>zippath</span>\<span class=p>]</span> <span class=o>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>              <span class=nb>zip</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=n>path</span><span class=p>,</span> <span class=n>zippath</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>zip</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
</span></span></code></pre></div></div><div class=article-tags><a class="badge badge-light" href=/tag/android/>Android</a>
<a class="badge badge-light" href=/tag/eclipse/>Eclipse</a></div><div class=share-box><ul class=share><li><a href="https://twitter.com/intent/tweet?url=https%3A%2F%2Fmichael.forster.pro%2Fpost%2Fandroid-source-eclipse%2F&text=View+Android+Source+Code+in+Eclipse" target=_blank rel=noopener class=share-btn-twitter aria-label=twitter><i class="fab fa-twitter"></i></a></li><li><a href="https://www.facebook.com/sharer.php?u=https%3A%2F%2Fmichael.forster.pro%2Fpost%2Fandroid-source-eclipse%2F&t=View+Android+Source+Code+in+Eclipse" target=_blank rel=noopener class=share-btn-facebook aria-label=facebook><i class="fab fa-facebook"></i></a></li><li><a href="mailto:?subject=View%20Android%20Source%20Code%20in%20Eclipse&body=https%3A%2F%2Fmichael.forster.pro%2Fpost%2Fandroid-source-eclipse%2F" target=_blank rel=noopener class=share-btn-email aria-label=envelope><i class="fas fa-envelope"></i></a></li><li><a href="https://www.linkedin.com/shareArticle?url=https%3A%2F%2Fmichael.forster.pro%2Fpost%2Fandroid-source-eclipse%2F&title=View+Android+Source+Code+in+Eclipse" target=_blank rel=noopener class=share-btn-linkedin aria-label=linkedin-in><i class="fab fa-linkedin-in"></i></a></li><li><a href="whatsapp://send?text=View+Android+Source+Code+in+Eclipse%20https%3A%2F%2Fmichael.forster.pro%2Fpost%2Fandroid-source-eclipse%2F" target=_blank rel=noopener class=share-btn-whatsapp aria-label=whatsapp><i class="fab fa-whatsapp"></i></a></li><li><a href="https://reddit.com/submit?url=https%3A%2F%2Fmichael.forster.pro%2Fpost%2Fandroid-source-eclipse%2F&title=View+Android+Source+Code+in+Eclipse" target=_blank rel=noopener class=share-btn-reddit aria-label=reddit-alien><i class="fab fa-reddit-alien"></i></a></li><li><a href="https://www.xing.com/spi/shares/new?url=https%3A%2F%2Fmichael.forster.pro%2Fpost%2Fandroid-source-eclipse%2F&title=View+Android+Source+Code+in+Eclipse" target=_blank rel=noopener class=share-btn-xing aria-label=xing><i class="fab fa-xing"></i></a></li></ul></div><div class="media author-card content-widget-hr"><a href=https://michael.forster.pro/><img class="avatar mr-3 avatar-circle" src=/authors/mforster/avatar_hue6f46eb9efcf84cca2584c713d68895d_786053_270x270_fill_q95_lanczos_center.jpg alt="Dr. Michael Forster"></a><div class=media-body><h5 class=card-title><a href=https://michael.forster.pro/>Dr. Michael Forster</a></h5><h6 class=card-subtitle>Principal Software Engineer</h6><ul class=network-icon aria-hidden=true><li><a href=mailto:michael@forster.pro><i class="fas fa-envelope"></i></a></li><li><a href=https://forster.pro/@michael target=_blank rel=noopener><i class="fab fa-mastodon"></i></a></li><li><a href=https://twitter.com/MForsterMuc target=_blank rel=noopener><i class="fab fa-twitter"></i></a></li><li><a href="https://scholar.google.co.uk/citations?user=23Ind-gAAAAJ" target=_blank rel=noopener><i class="fas fa-graduation-cap"></i></a></li><li><a href=https://github.com/MForster target=_blank rel=noopener><i class="fab fa-github"></i></a></li><li><a href=https://www.linkedin.com/in/forstermichael target=_blank rel=noopener><i class="fab fa-linkedin"></i></a></li></ul></div></div><section id=comments></section></div></article></div><div class=page-footer><div class=container><footer class=site-footer><p class=powered-by></p></footer></div></div><script src=/js/vendor-bundle.min.d26509351aa0ff874abbee824e982e9b.js></script>
<script id=page-data type=application/json>{"use_headroom":true}</script><script src=/js/wowchemy-headroom.db4755770454eb63685f8de785c0a172.js type=module></script>
<script src=/en/js/wowchemy.min.e973d49cb2d568aa6f8eaf3638337473.js></script><div id=modal class="modal fade" role=dialog><div class=modal-dialog><div class=modal-content><div class=modal-header><h5 class=modal-title>Cite</h5><button type=button class=close data-dismiss=modal aria-label=Close>
<span aria-hidden=true>&#215;</span></button></div><div class=modal-body><pre><code></code></pre></div><div class=modal-footer><a class="btn btn-outline-primary my-1 js-copy-cite" href=# target=_blank><i class="fas fa-copy"></i> Copy</a>
<a class="btn btn-outline-primary my-1 js-download-cite" href=# target=_blank><i class="fas fa-download"></i> Download</a><div id=modal-error></div></div></div></div></div><script src=/js/wowchemy-publication.68f8d7090562ca65fc6d3cb3f8f2d2cb.js type=module></script></body></html>